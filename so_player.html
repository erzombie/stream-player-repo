<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>SO Player — GIF only</title>
<style>
  :root{
    /* feel free to tweak */
    --radius: clamp(12px, 3vmin, 28px);     /* rounded corners for GIF */
    --shadow: 0 14px 38px rgba(0,0,0,.35);
    --chipBg: rgba(32,32,32,.92);
    --chipText: #fff;
    --chipMuted: #d8d8d8;
  }

  html,body{height:100%;width:100%;margin:0;background:transparent;overflow:hidden;
            font-family: system-ui, Segoe UI, Roboto, Inter, Arial, sans-serif;}

  #stage{position:fixed; inset:0; background:transparent}

  /* --- GIF box (centered, rounded, no overscan) --- */
  #gifBox{
    position:absolute; left:50%; top:6vh; transform:translateX(-50%);
    width:min(92vw, 160vh);               /* keep ~16:9 limits without forcing it */
    height:min(78vh, 51.75vw);
    border-radius:var(--radius);
    overflow:hidden;
    box-shadow: var(--shadow);
    display:flex; align-items:center; justify-content:center;
    background: transparent;              /* no dark plate; the GIF edges are rounded */
  }
  #gif{
    width:100%; height:100%;
    object-fit: contain;                  /* don’t upscale/pixelate */
    border-radius:var(--radius);          /* dynamic curved edges */
    display:block;
    background: transparent;
  }

  /* --- Bottom “O=” banner: big avatar + slightly smaller chip on the side --- */
  #chipWrap{
    position:absolute; left:50%; bottom:4.5vh; transform:translateX(-50%);
    display:flex; align-items:center; gap:clamp(12px, 1.6vw, 24px);
    pointer-events:none;
  }
  /* Big round avatar (“O”) */
  #avatarWrap{
    width: clamp(96px, 12vw, 160px);
    height: clamp(96px, 12vw, 160px);
    border-radius: 999px;
    overflow:hidden;
    border: clamp(2px, .5vw, 4px) solid rgba(0,0,0,.35);
    box-shadow: inset 0 0 0 2px rgba(255,255,255,.08), var(--shadow);
    flex: 0 0 auto;
    background:#222;
  }
  #avatar{
    width:100%; height:100%;
    object-fit: cover;
    display:block;
  }

  /* “=” chip (a bit smaller than avatar’s height) */
  #chip{
    height: clamp(64px, 8.2vw, 110px);          /* smaller than the avatar */
    max-width: min(70vw, 1200px);
    padding: 0 clamp(18px, 2.2vw, 34px);
    display:flex; align-items:center;
    border-radius: 14px;
    background: var(--chipBg);
    color: var(--chipText);
    box-shadow: var(--shadow);
  }
  #name{
    font-weight: 900;
    font-size: clamp(26px, 3.8vw, 58px);
    line-height: 1.02; letter-spacing: .2px;
  }
  #tag{
    font-size: clamp(14px, 2vw, 26px);
    color: var(--chipMuted);
    margin-left: clamp(10px, 1.5vw, 18px);
  }

  /* Small stack when canvas is narrow */
  @media (max-width: 560px){
    #chip{padding: 0 14px}
    #tag{display:none}
  }
</style>
</head>
<body>
  <div id="stage">
    <div id="gifBox"><img id="gif" alt="shoutout-gif" /></div>

    <!-- O= banner -->
    <div id="chipWrap" role="complementary" aria-live="polite">
      <div id="avatarWrap"><img id="avatar" alt="avatar"></div>
      <div id="chip">
        <div id="name">Friend</div>
        <div id="tag">Check out Friend!</div>
      </div>
    </div>
  </div>

<script>
(function(){
  /* ---- params with simple aliases ---- */
  const qs = new URLSearchParams(location.search);
  const alias = (keys, d='')=>{
    for (const k of (Array.isArray(keys)?keys:[keys])) if (qs.has(k)) return qs.get(k)||d;
    return d;
  };

  const P = {
    name:    alias(['name','displayName','user','username','target'], 'Friend'),
    profile: alias(['profile','avatar','pfp','image','img'], ''),
    text:    alias(['text','banner','subtitle'], ''),
    // GIF selection: explicit url OR "random"
    gif:     alias(['gif','fallback','fallbackGif'], 'random'),
    // duration (ms) before Streamer.bot hides the source (default 6000)
    dur:     (()=>{ const n = parseInt(alias(['dur','duration','ms'], ''), 10);
                    return Number.isFinite(n)&&n>0 ? n : 6000; })()
  };

  // banner content
  document.getElementById('name').textContent = P.name;
  document.getElementById('tag').textContent  = P.text || `Check out ${P.name}!`;
  if (P.profile) document.getElementById('avatar').src = P.profile;

  // random GIF pool (edit to taste)
  const gifPool = [
    '/stream-player-repo/assets/hellothere.gif',
    '/stream-player-repo/assets/hellothere2.gif',
    '/stream-player-repo/assets/blinkguy.gif',
    '/stream-player-repo/assets/bocchi.gif',
    '/stream-player-repo/assets/elmo.gif',
    '/stream-player-repo/assets/lick-anime.gif'
  ];
  const pickGif = (arg)=> arg && arg !== 'random'
      ? arg
      : gifPool[Math.floor(Math.random()*gifPool.length)];

  // show GIF immediately
  document.getElementById('gif').src = pickGif(P.gif);

  // simple timer: SB hides the browser source afterwards
  let t = setTimeout(()=>{/* no-op */}, P.dur);
})();
</script>
</body>
</html>
