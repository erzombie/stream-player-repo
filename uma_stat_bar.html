<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Uma Stat Bar Overlay</title>
  <style>
    body{margin:0;background:transparent;font-family:'Roboto',system-ui,sans-serif;color:#4a2c0a}
    #barWrapper{display:flex;justify-content:center;align-items:flex-start;gap:0;box-shadow:0 6px 18px rgba(0,0,0,.25);border-radius:10px;overflow:hidden;width:max-content;margin:20px auto}
    .statBox{background:#fdf6eb;flex:1;min-width:150px;padding:8px 12px;text-align:center;position:relative;border-right:1px solid #d8cbb6}
    .statBox:last-child{border-right:none}
    .statLabel{display:block;margin-bottom:4px;height:42px} /* increased 1.5x */
    .statLabel img{height:100%;object-fit:contain}
    .statValue{font-size:40px;font-weight:900;position:relative;z-index:1;}
    .statValue.pop{animation:valPop .45s ease-out}
    @keyframes valPop{0%{transform:scale(.92)}60%{transform:scale(1.1)}100%{transform:scale(1)}}

    .chevron{position:absolute;left:50%;transform:translateX(-50%);opacity:0.85;z-index:2;}
    .chevron.up{top:10px;animation:rise 1s ease-out forwards}
    .chevron.down{bottom:10px;animation:drop 1s ease-out forwards}
    .chevron img{height:42px;} /* bigger chevron */

    .delta{position:absolute;left:50%;top:20%;transform:translate(-50%,-50%);font:900 28px/1 'Roboto',system-ui,sans-serif;-webkit-text-stroke:3px #fff;opacity:.98;z-index:3}
    .delta.up{background:linear-gradient(to top,#ff8a00,#ffd080);-webkit-background-clip:text;-webkit-text-fill-color:transparent;animation:rise 1s cubic-bezier(.2,.9,.2,1) forwards}
    .delta.down{background:linear-gradient(to top,#3a8dff,#a0cfff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;animation:drop 1s cubic-bezier(.2,.9,.2,1) forwards}

    @keyframes rise{0%{transform:translate(-50%,20px);opacity:0}30%{opacity:1}100%{transform:translate(-50%,-20px);opacity:0}}
    @keyframes drop{0%{transform:translate(-50%,-20px);opacity:0}30%{opacity:1}100%{transform:translate(-50%,20px);opacity:0}}
  </style>
</head>
<body>
  <div id="barWrapper">
    <div class="statBox" id="box-Speed">
      <span class="statLabel"><img src="bar_speed.png" alt="Speed"></span>
      <div class="statValue" id="val-Speed">0</div>
    </div>
    <div class="statBox" id="box-Stamina">
      <span class="statLabel"><img src="bar_stamina.png" alt="Stamina"></span>
      <div class="statValue" id="val-Stamina">0</div>
    </div>
    <div class="statBox" id="box-Power">
      <span class="statLabel"><img src="bar_power.png" alt="Power"></span>
      <div class="statValue" id="val-Power">0</div>
    </div>
    <div class="statBox" id="box-Guts">
      <span class="statLabel"><img src="bar_guts.png" alt="Guts"></span>
      <div class="statValue" id="val-Guts">0</div>
    </div>
    <div class="statBox" id="box-Wit">
      <span class="statLabel"><img src="bar_wit.png" alt="Wit"></span>
      <div class="statValue" id="val-Wit">0</div>
    </div>
  </div>

  <script>
    const chevronUp = 'https://erzombie.github.io/stream-player-repo/uma_overlay/uma_pos_chevron.png';
    const chevronDown = 'https://erzombie.github.io/stream-player-repo/uma_overlay/uma_neg_chevron.png';
    const LABELS = {
      Speed:  "https://erzombie.github.io/stream-player-repo/uma_overlay/bar_speed.png",
      Stamina:  "https://erzombie.github.io/stream-player-repo/uma_overlay/bar_stamina.png",
      Power:  "https://erzombie.github.io/stream-player-repo/uma_overlay/bar_power.png",
      Guts:   "https://erzombie.github.io/stream-player-repo/uma_overlay/bar_guts.png",
      Wit:    "https://erzombie.github.io/stream-player-repo/uma_overlay/bar_wit.png"
};
    function tweenNumber(stat, target, dur=700){
      const el=document.getElementById('val-'+stat); if(!el) return;
      const start=parseInt(el.textContent||'0',10); const diff=target-start; if(!diff){return;}
      const t0=performance.now();
      function step(t){
        const p=Math.min(1,(t-t0)/dur);
        const e=1-Math.pow(1-p,3); // easeOutCubic
        el.textContent = Math.round(start + diff*e);
        if(p<1) requestAnimationFrame(step); else { el.textContent=target; el.classList.remove('pop'); void el.offsetWidth; el.classList.add('pop'); }
      }
      requestAnimationFrame(step);
    }

    function updateStat(stat, newValue, theme){
  const el = document.getElementById('val-'+stat);
  if(!el) return;
  const old = parseInt(el.textContent)||0;
  const diff = newValue - old;

  // Number tween
  tweenNumber(stat, newValue);

  // Chevron
  const chev = document.createElement('img');
  chev.src = (theme==='down'?chevronDown:chevronUp);
  chev.className = 'chevron ' + (theme==='down'?'down':'up');
  chev.style.height = '42px';  // larger
  document.getElementById('box-'+stat).appendChild(chev);

  // Delta
  if(diff !== 0){
    const d = document.createElement('div');
    d.className = 'delta ' + (diff<0?'down':'up');
    d.textContent = (diff>0?'+':'') + diff;
    chev.insertAdjacentElement('afterend', d);
    setTimeout(()=>d.remove(), 1000);
  }

  setTimeout(()=>chev.remove(), 1000);
}


    // demo
    window.addEventListener('load',()=>{
      setTimeout(()=>updateStat('Speed',120,'up'),1000);
      setTimeout(()=>updateStat('Stamina',90,'up'),1500);
      setTimeout(()=>updateStat('Power',60,'up'),2000);
      setTimeout(()=>updateStat('Guts',40,'down'),2500);
      setTimeout(()=>updateStat('Wit',-30,'down'),3000);
    });
  </script>
</body>
</html>
