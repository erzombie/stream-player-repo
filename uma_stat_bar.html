<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Uma Stat Bar Overlay</title>
  <style>
    body{margin:0;background:transparent;font-family:'Roboto',system-ui,sans-serif;color:#4a2c0a}
    #barWrapper{display:flex;justify-content:center;align-items:flex-start;gap:0;box-shadow:0 6px 18px rgba(0,0,0,.25);border-radius:10px;overflow:hidden;width:max-content;margin:20px auto}
    .statBox{background:#fdf6eb;flex:1;min-width:150px;padding:4px 10px;text-align:center;position:relative;border-right:1px solid #d8cbb6;display:flex;flex-direction:column;align-items:center}
    .statBox:last-child{border-right:none}
    .statLabel{background:#4b2f1a;width:100%;padding:4px 0;margin-bottom:6px;display:flex;justify-content:center;align-items:center;border-radius:4px}
    .statLabel img{height:22px;object-fit:contain}
    .statValue{font-size:36px;font-weight:900;position:relative;z-index:1;}
    .chevron{position:absolute;left:50%;transform:translateX(-50%);opacity:0.85;z-index:2;}
    .chevron.up{top:20px;animation:rise 1s ease-out forwards}
    .chevron.down{bottom:20px;animation:drop 1s ease-out forwards}

    @keyframes rise{0%{transform:translate(-50%,20px);opacity:0}30%{opacity:1}100%{transform:translate(-50%,-20px);opacity:0}}
    @keyframes drop{0%{transform:translate(-50%,-20px);opacity:0}30%{opacity:1}100%{transform:translate(-50%,20px);opacity:0}}
  </style>
</head>
<body>
  <div id="barWrapper">
    <div class="statBox" id="box-Speed">
      <span class="statLabel"><img id="img-Speed" alt="Speed"></span>
      <div class="statValue" id="val-Speed">0</div>
    </div>
    <div class="statBox" id="box-Stamina">
      <span class="statLabel"><img id="img-Stamina" alt="Stamina"></span>
      <div class="statValue" id="val-Stamina">0</div>
    </div>
    <div class="statBox" id="box-Power">
      <span class="statLabel"><img id="img-Power" alt="Power"></span>
      <div class="statValue" id="val-Power">0</div>
    </div>
    <div class="statBox" id="box-Guts">
      <span class="statLabel"><img id="img-Guts" alt="Guts"></span>
      <div class="statValue" id="val-Guts">0</div>
    </div>
    <div class="statBox" id="box-Wit">
      <span class="statLabel"><img id="img-Wit" alt="Wit"></span>
      <div class="statValue" id="val-Wit">0</div>
    </div>
  </div>

  <script>
    const chevronUp = 'https://erzombie.github.io/stream-player-repo/uma_overlay/uma_pos_chevron.png';
    const chevronDown = 'https://erzombie.github.io/stream-player-repo/uma_overlay/uma_neg_chevron.png';

    // label PNGs (absolute URLs) + preload + setter
    const LABELS = {
      Speed:   'https://erzombie.github.io/stream-player-repo/uma_overlay/bar_speed.png',
      Stamina: 'https://erzombie.github.io/stream-player-repo/uma_overlay/bar_stamina.png',
      Power:   'https://erzombie.github.io/stream-player-repo/uma_overlay/bar_power.png',
      Guts:    'https://erzombie.github.io/stream-player-repo/uma_overlay/bar_guts.png',
      Wit:     'https://erzombie.github.io/stream-player-repo/uma_overlay/bar_wit.png'
    };
    function preload(urls){return Promise.allSettled(urls.map(u=>new Promise(r=>{try{const i=new Image();i.onload=i.onerror=()=>r();i.src=u;if(i.decode)i.decode().then(r).catch(r);}catch{r()}})));}
    function setLabels(){for(const k of Object.keys(LABELS)){const el=document.getElementById('img-'+k); if(el) el.src=LABELS[k];}}

    function updateStat(stat, newValue, theme){
      const el=document.getElementById('val-'+stat);
      if(!el)return;
      const old=parseInt(el.textContent)||0;
      el.textContent=newValue;
      const chev=document.createElement('img');
      chev.src=(theme==='down'?chevronDown:chevronUp);
      chev.className='chevron '+(theme==='down'?'down':'up');
      chev.style.height='28px';
      document.getElementById('box-'+stat).appendChild(chev);
      setTimeout(()=>chev.remove(),1000);
    }

    // demo
    window.addEventListener('load', async()=>{ await preload(Object.values(LABELS)); setLabels();
      setTimeout(()=>updateStat('Speed',120,'up'),1000);
      setTimeout(()=>updateStat('Stamina',90,'up'),1500);
      setTimeout(()=>updateStat('Power',60,'up'),2000);
      setTimeout(()=>updateStat('Guts',40,'down'),2500);
      setTimeout(()=>updateStat('Wit',30,'down'),3000);
    });
  </script>
</body>
</html>
